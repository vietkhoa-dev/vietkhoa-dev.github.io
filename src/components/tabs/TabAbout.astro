---
// @ts-nocheck
import { Code } from "astro:components";
import { profile, uiText } from "../../data/data.js";

const { lang = "vi" } = Astro.props;
const data = profile[lang] || profile.vi;
const txt = uiText[lang] || uiText.vi;
const comment = txt.tabAbout?.codeComments || {};

const descMap = {
  vi: "Cấu hình thông tin Kỹ sư Hệ thống",
  ja: "システム構成設定",
  en: "System Configuration Profile",
};
const description = descMap[lang] || descMap.en;

const dollar = "$";

const codeLines = [
  "/**",
  ` * @file profile.config.js`,
  ` * @desc ${description}`,
  ` * @author ${data.name || "nvkdevs"} <${data.location || ""}>`,
  " */",
  "",
  `// ${comment.personal || "1. Personal Information"}`,
  "const MY_PROFILE = {",
  `  name:     "${data.name || ""}",`,
  `  role:     "${data.role || ""}",`,
  `  location: "${data.location || ""}",`,
  '  status:   "HTTP 200 OK (Running)",',
  "",
  "  languages: {",
  `    vi: "${data.languages?.vi || ""}",`,
  `    ja: "${data.languages?.ja || ""}",`,
  `    en: "${data.languages?.en || ""}"`,
  "  }",
  "};",
  "",
  `// ${comment.tech || "2. Tech Stack"}`,
  "const TECH_STACK = {",
  `  backend:  ${JSON.stringify(data.skills?.backend || [])},`,
  `  database: ${JSON.stringify(data.skills?.database || [])},`,
  `  system:   ${JSON.stringify(data.skills?.system || [])},`,
  `  docs:     ${JSON.stringify(data.skills?.docs || [])},`,
  '  tools:    ["Git", "Docker", "VS Code"]',
  "};",
  "",
  `// ${comment.method || "3. Export Info"}`,
  "export const getSystemInfo = () => {",
  "  return {",
  `    ...MY_PROFILE, // ${comment.spread || "Spread Operator"}`,
  "    skills: TECH_STACK,",
  `    message: \`${comment.message || ""} ${dollar}{MY_PROFILE.role}\``,
  `    // ${comment.message || ""} ${data.role || ""}`,
  "  };",
  "};",
];

const jsCode = codeLines.join("\n");
---

<div class="code-container h-full">
  <Code
    code={jsCode}
    lang="javascript"
    theme="one-dark-pro"
    class="text-[11px] md:text-sm p-4 md:p-6! line"
  />
</div>
